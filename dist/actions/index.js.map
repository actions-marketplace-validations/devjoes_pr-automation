{"version":3,"sources":["../../src/actions/index.js"],"names":["args","logger","context","github","client","GitHub","token","opts","handleErrors","func","funcName","Promise","r","promise","then","catch","err","warning","getPrs","closePrs","markPrs","mergePrs","unmarkPrs","updatePrs"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;eAEe,CACbA,IADa,EAEbC,MAFa,EAGbC,OAAO,GAAGC,MAAM,CAACD,OAHJ,EAIbE,MAAM,GAAG,IAAID,MAAM,CAACE,MAAX,CAAkBL,IAAI,CAACM,KAAvB,CAJI,KAKV;AACH,QAAMC,IAAI,GAAG;AAAEP,IAAAA,IAAF;AAAQE,IAAAA,OAAR;AAAiBE,IAAAA,MAAjB;AAAyBH,IAAAA;AAAzB,GAAb;;AACA,QAAMO,YAAY,GAAG,CAACC,IAAD,EAAOC,QAAP,KAAoB,CAAC,GAAGV,IAAJ,KACvC,IAAIW,OAAJ,CAAYC,CAAC,IAAI;AACf,UAAMC,OAAO,GAAGJ,IAAI,CAAC,GAAGT,IAAJ,CAApB;AACAa,IAAAA,OAAO,CAACC,IAAR,CAAaF,CAAb;AACAC,IAAAA,OAAO,CAACE,KAAR,CAAcC,GAAG,IAAI;AACnBf,MAAAA,MAAM,CAACgB,OAAP,CAAgB,GAAEP,QAAS,aAAYM,GAAI,EAA3C;AACAJ,MAAAA,CAAC,CAAC,EAAD,CAAD;AACD,KAHD;AAID,GAPD,CADF;;AAUA,SAAO;AACLM,IAAAA,MAAM,EAAE,qBAAOX,IAAP,CADH;AAELY,IAAAA,QAAQ,EAAEX,YAAY,CAAC,uBAASD,IAAT,CAAD,EAAiB,UAAjB,CAFjB;AAGLa,IAAAA,OAAO,EAAEZ,YAAY,CAAC,sBAAQD,IAAR,CAAD,EAAgB,SAAhB,CAHhB;AAILc,IAAAA,QAAQ,EAAEb,YAAY,CAAC,uBAASD,IAAT,CAAD,EAAiB,UAAjB,CAJjB;AAKLe,IAAAA,SAAS,EAAEd,YAAY,CAAC,wBAAUD,IAAV,CAAD,EAAkB,WAAlB,CALlB;AAMLgB,IAAAA,SAAS,EAAEf,YAAY,CAAC,wBAAUD,IAAV,CAAD,EAAkB,WAAlB;AANlB,GAAP;AAQD,C","sourcesContent":["import * as github from '@actions/github';\r\nimport closePrs from './close-prs';\r\nimport getPrs from './get-prs';\r\nimport markPrs from './mark-prs';\r\nimport mergePrs from './merge-prs';\r\nimport unmarkPrs from './unmark-prs';\r\nimport updatePrs from './update-prs';\r\n\r\nexport default (\r\n  args,\r\n  logger,\r\n  context = github.context,\r\n  client = new github.GitHub(args.token),\r\n) => {\r\n  const opts = { args, context, client, logger };\r\n  const handleErrors = (func, funcName) => (...args) =>\r\n    new Promise(r => {\r\n      const promise = func(...args);\r\n      promise.then(r);\r\n      promise.catch(err => {\r\n        logger.warning(`${funcName} errored. ${err}`);\r\n        r([]);\r\n      });\r\n    });\r\n\r\n  return {\r\n    getPrs: getPrs(opts),\r\n    closePrs: handleErrors(closePrs(opts), 'closePrs'),\r\n    markPrs: handleErrors(markPrs(opts), 'markPrs'),\r\n    mergePrs: handleErrors(mergePrs(opts), 'mergePrs'),\r\n    unmarkPrs: handleErrors(unmarkPrs(opts), 'unmarkPrs'),\r\n    updatePrs: handleErrors(updatePrs(opts), 'updatePrs'),\r\n  };\r\n};\r\n"],"file":"index.js"}